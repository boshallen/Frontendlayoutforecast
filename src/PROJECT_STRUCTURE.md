# 房地产价格预测系统 - 项目结构说明

## 📁 项目文件结构详解

### 🎯 核心文件

#### `/App.tsx`
**主应用程序入口文件**
- 作用：整个应用的根组件
- 功能：展示四种布局选项的选择界面，让用户选择喜欢的布局风格
- 包含：布局选项1-4的预览和切换逻辑

---

### 📦 主要功能组件 (`/components/`)

#### 核心布局文件

##### `LayoutOption1.tsx` - 选项一：标签页布局
- **设计风格**：清晰的标签页分离界面
- **特点**：预测和AI推理分别在不同标签页中
- **适用场景**：适合专注于单一任务的工作流程
- **包含功能**：
  - 顶部位置选择器
  - 标签页切换（预测结果/AI推理）
  - 用户登录状态管理

##### `LayoutOption2.tsx` - 选项二：分屏布局（★ 当前使用）
- **设计风格**：中国国企风格，红色主题
- **特点**：左右分屏，可调整大小的面板
- **包含功能**：
  - 侧边栏导航（工作台、新建预测、历史记录、系统设置）
  - 顶部红色官方风格导航栏
  - 左侧：预测结果面板
  - 右侧：AI智能分析面板
  - 可拖动调整左右面板大小
- **适用场景**：桌面用户，需要实时对比预测和推理结果

##### `LayoutOption3.tsx` - 选项三：向导流程
- **设计风格**：分步引导式界面
- **特点**：步骤化进度指示器
- **包含功能**：
  - 第一步：选择位置
  - 第二步：查看预测结果
  - 第三步：AI见解
- **适用场景**：新用户，需要引导式体验

##### `LayoutOption4.tsx` - 选项四：仪表板风格
- **设计风格**：综合控制面板
- **特点**：侧边栏导航 + 可折叠区域
- **包含功能**：
  - 左侧永久导航栏
  - 可折叠的功能区域
  - 全景概览
- **适用场景**：高级用户

---

#### 页面视图组件

##### `DashboardView.tsx` - 工作台页面
**功能**：系统主页面，显示总览信息
**包含内容**：
- 📊 统计卡片：预测总数、平均价格、关注房产、平均置信度
- 🔥 热门市场：显示增长最快的城市和区域
- 📝 最近动态：用户最新操作记录
- 🎯 市场分析报告：推荐和洞察信息
- 🔘 快捷操作按钮：新建预测

##### `HistoryView.tsx` - 历史记录页面
**功能**：查看和管理历史预测记录
**包含内容**：
- 🔍 搜索功能：按位置搜索
- 🎛️ 筛选器：按省份筛选、排序方式
- 📋 预测列表：显示所有历史预测
- 📄 分页控制：每页6条记录
- 📥 导出功能：导出数据
- 👁️ 查看详情：查看单个预测的详细信息

##### `SettingsView.tsx` - 系统设置页面
**功能**：管理用户账户和偏好设置
**包含内容**：
- 👤 个人资料标签：
  - 头像上传
  - 姓名、邮箱、手机号
  - 个人简介
  - 修改密码
- 🔔 通知设置标签：
  - 邮件通知开关
  - 推送通知开关
  - 各类通知项开关（预测更新、市场预警、价格变动、周报）

---

#### 功能组件

##### `LoginRegister.tsx` - 登录注册页面
**功能**：用户认证界面
**设计**：中国国企风格，红色渐变顶栏
**包含内容**：
- 左侧：系统简介（仅大屏显示）
  - 智能预测技术
  - 专业分析建议
  - 实时数据更新
  - 安全可靠
  - 服务热线信息
- 右侧：认证表单
  - 登录标签页：邮箱、密码
  - 注册标签页：姓名、邮箱、密码
- 底部：服务条款和隐私政策链接、ICP备案号

##### `LocationSelector.tsx` - 位置选择器
**功能**：四级联动的位置选择组件
**选择层级**：
1. 省份（下拉选择）
2. 城市（下拉选择，依赖省份）
3. 区/县（下拉选择，依赖城市）
4. 小区名称（搜索匹配）
**数据**：
- 当前使用模拟数据
- 可替换为真实API数据
**包含地区**：北京、上海、广东、浙江、江苏等主要城市

##### `PredictionResults.tsx` - 预测结果展示
**功能**：显示机器学习模型的预测结果
**展示内容**：
- ✅ 预测状态：完成/错误/加载中
- 💰 预测价格：总价和单价（元/平方米）
- 📈 置信度：百分比显示
- 📊 市场趋势：上涨/下降标识
- 📉 价格区间：最低价-最高价
- 🎯 关键影响因素：
  - 地段评分
  - 交通便利度
  - 学区质量
  - 房龄因素
  - 配套设施
  - 每项显示影响程度（高/中）和分数
- 🏘️ 可比房产：显示3个相似房产及距离

##### `AIReasoningChat.tsx` - AI智能分析对话
**功能**：与AI助手对话，获取详细分析
**特点**：
- 💬 聊天界面：用户和AI消息分离显示
- 🤖 AI头像：蓝色背景
- 👤 用户头像：红色背景
- ⏱️ 时间戳：每条消息显示时间
- ⌨️ 输入框：支持Enter发送、Shift+Enter换行
- 🔄 加载状态：显示AI正在思考
**AI回复内容**（模拟）：
- 价格合理性分析
- 可比房产对比
- 关键因素解读
- 市场趋势建议
- 投资建议

---

### 🎨 UI组件库 (`/components/ui/`)

这个文件夹包含所有可重用的UI组件（基于shadcn/ui）：

#### 表单组件
- `button.tsx` - 按钮组件
- `input.tsx` - 输入框
- `textarea.tsx` - 文本域
- `label.tsx` - 标签
- `select.tsx` - 下拉选择
- `checkbox.tsx` - 复选框
- `switch.tsx` - 开关
- `radio-group.tsx` - 单选按钮组
- `slider.tsx` - 滑动条
- `input-otp.tsx` - OTP验证码输入

#### 布局组件
- `card.tsx` - 卡片容器
- `separator.tsx` - 分隔线
- `scroll-area.tsx` - 滚动区域
- `resizable.tsx` - 可调整大小面板
- `aspect-ratio.tsx` - 固定宽高比容器
- `sidebar.tsx` - 侧边栏

#### 导航组件
- `tabs.tsx` - 标签页
- `navigation-menu.tsx` - 导航菜单
- `menubar.tsx` - 菜单栏
- `breadcrumb.tsx` - 面包屑导航
- `pagination.tsx` - 分页器

#### 反馈组件
- `alert.tsx` - 警告提示
- `alert-dialog.tsx` - 警告对话框
- `dialog.tsx` - 对话框
- `drawer.tsx` - 抽屉
- `toast/sonner.tsx` - 消息通知
- `progress.tsx` - 进度条
- `skeleton.tsx` - 骨架屏

#### 数据展示
- `table.tsx` - 表格
- `badge.tsx` - 徽章
- `avatar.tsx` - 头像
- `chart.tsx` - 图表
- `carousel.tsx` - 轮播图
- `accordion.tsx` - 手风琴折叠

#### 弹出层组件
- `popover.tsx` - 弹出框
- `tooltip.tsx` - 工具提示
- `hover-card.tsx` - 悬停卡片
- `dropdown-menu.tsx` - 下拉菜单
- `context-menu.tsx` - 右键菜单
- `command.tsx` - 命令面板（搜索用）
- `sheet.tsx` - 侧边抽屉

#### 其他
- `collapsible.tsx` - 可折叠组件
- `toggle.tsx` / `toggle-group.tsx` - 切换按钮
- `form.tsx` - 表单辅助

#### 工具文件
- `use-mobile.ts` - 检测移动设备的Hook
- `utils.ts` - 工具函数

---

### 🖼️ 特殊组件 (`/components/figma/`)

##### `ImageWithFallback.tsx`
- **作用**：带后备方案的图片组件
- **功能**：如果图片加载失败，显示占位符
- **注意**：这是受保护的系统文件，不要修改

---

### 🎨 样式文件 (`/styles/`)

##### `globals.css`
- **作用**：全局CSS样式
- **包含**：
  - Tailwind CSS 基础样式
  - 自定义颜色变量
  - 全局排版设置
  - 默认元素样式

---

### 📖 文档文件

##### `Attributions.md`
- **作用**：第三方库和资源的归属说明
- **内容**：使用的开源组件和许可证信息

##### `guidelines/Guidelines.md`
- **作用**：项目开发指南
- **内容**：代码规范、组件使用说明

---

## 🔄 数据流程

### 1. 用户登录流程
```
LoginRegister.tsx → 验证 → LayoutOption2.tsx → 显示主界面
```

### 2. 预测流程
```
用户 → LocationSelector.tsx（选择位置）
     → 点击"开始预测"
     → PredictionResults.tsx（显示预测）
     → AIReasoningChat.tsx（AI分析）
```

### 3. 页面导航流程
```
LayoutOption2.tsx 侧边栏/顶部导航
├── 工作台 → DashboardView.tsx
├── 新建预测 → LocationSelector + 分屏显示
├── 历史记录 → HistoryView.tsx
└── 系统设置 → SettingsView.tsx
```

---

## 🎯 当前使用的布局（Option 2）

### 页面结构
```
┌─────────────────────────────────────────────────┐
│  红色顶栏：房地产价格预测系统 | 欢迎您 [退出]   │
├─────────────────────────────────────────────────┤
│  导航栏：[工作台] [新建预测] [历史记录] [设置]   │
├─────────────────────────────────────────────────┤
│                                                 │
│  主内容区域（根据导航切换）                      │
│  - 工作台：统计卡片 + 热门市场 + 最近动态        │
│  - 新建预测：                                   │
│    ┌─────────────────────────────────┐         │
│    │  位置选择器（四级联动）          │         │
│    │  [开始预测] 按钮                │         │
│    └─────────────────────────────────┘         │
│    ┌──────────────┬──────────────┐             │
│    │  预测结果    │  AI智能分析  │  (可调整)   │
│    │  (左侧)      │  (右侧)      │             │
│    └──────────────┴──────────────┘             │
│  - 历史记录：搜索 + 筛选 + 列表 + 分页          │
│  - 设置：个人资料 / 通知设置                    │
│                                                 │
├─────────────────────────────────────────────────┤
│  底部：© 2025 房地产价格预测系统 | ICP备案      │
└─────────────────────────────────────────────────┘
```

---

## 💡 重要说明

### 需要替换的模拟数据

1. **LocationSelector.tsx**
   - `locations` 对象：省市区和小区数据
   - 替换为真实API调用

2. **PredictionResults.tsx**
   - `predictionData` 对象：预测结果数据
   - 替换为机器学习模型API返回的数据

3. **AIReasoningChat.tsx**
   - `responses` 数组：AI回复内容
   - 替换为真实LLM API调用

4. **DashboardView.tsx & HistoryView.tsx**
   - 统计数据和历史记录
   - 替换为后端数据库查询结果

### 建议的后端API端点

```
POST /api/auth/login - 用户登录
POST /api/auth/register - 用户注册
GET  /api/locations/provinces - 获取省份列表
GET  /api/locations/cities/:province - 获取城市列表
GET  /api/locations/districts/:city - 获取区县列表
GET  /api/locations/neighborhoods/:district - 获取小区列表
POST /api/predictions - 创建新预测
GET  /api/predictions - 获取预测历史
GET  /api/predictions/:id - 获取单个预测详情
POST /api/ai/chat - AI对话接口
GET  /api/dashboard/stats - 获取工作台统计数据
PUT  /api/user/profile - 更新用户资料
PUT  /api/user/settings - 更新用户设置
```

---

## 🚀 快速开始

### 当前功能状态
- ✅ 完整的UI界面（中文 + 国企风格）
- ✅ 用户认证界面（登录/注册）
- ✅ 四级位置选择器
- ✅ 预测结果展示界面
- ✅ AI对话界面
- ✅ 工作台统计页面
- ✅ 历史记录管理
- ✅ 用户设置页面
- ⏳ 后端API集成（待实现）
- ⏳ 真实数据连接（待实现）

### 下一步工作
1. 开发后端API服务
2. 集成机器学习预测模型
3. 集成LLM对话模型
4. 连接真实数据库
5. 实现真实的用户认证
6. 添加数据持久化
7. 部署到生产环境

---

**最后更新日期**：2025年11月6日
