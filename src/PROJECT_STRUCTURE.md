# 房地产价格预测系统 - 项目结构说明

## 📁 项目文件结构

### 🎯 核心文件

#### `/App.tsx`
**应用程序入口文件**
- 作用：整个应用的根组件
- 功能：直接渲染 Layout 组件
- 代码：
```tsx
import { Layout } from './components/Layout';
export default function App() {
  return <Layout />;
}
```

---

### 📦 主要功能组件 (`/components/`)

#### `Layout.tsx` - 主布局组件 ⭐
**完整的应用主界面**
- **设计风格**：中国国企风格，红色主题
- **功能**：
  - 用户登录状态管理
  - 顶部红色渐变导航栏
  - 四个主要视图切换：工作台、新建预测、历史记录、系统设置
  - 响应式布局（最大宽度 1400px）
- **组成部分**：
  - Header：Logo + 系统标题 + 用户信息 + 退出按钮
  - Navigation：四个导航标签
  - Main Content：根据选择显示不同视图
  - Footer：版权信息和备案号
- **预测界面特点**：
  - 位置选择器在顶部
  - 左右可调整大小的分屏面板
  - 左侧：预测结果
  - 右侧：AI智能分析

---

#### 页面视图组件

##### `DashboardView.tsx` - 工作台页面
**功能**：系统主页面，显示哈尔滨房产数据总览
**包含内容**：
- 📊 **统计卡片**（4个）：
  - 预测总数：24
  - 平均价格：¥85万（哈尔滨实际价格）
  - 关注房产：18
  - 平均置信度：87%
- 🔥 **热门市场**：哈尔滨各区
  - 南岗区：¥92万均价，+12.5%
  - 道里区：¥88万均价，+10.8%
  - 香坊区：¥76万均价，+9.2%
  - 道外区：¥68万均价，+7.6%
- 📝 **最近动态**：用户操作记录
  - 南岗区、道里区、香坊区的预测记录
- 🎯 **市场分析报告**：哈尔滨市场报告推荐

##### `HistoryView.tsx` - 历史记录页面
**功能**：查看和管理历史预测记录
**包含内容**：
- 🔍 **搜索功能**：按位置搜索
- 🎛️ **筛选器**：
  - 按区县筛选：南岗区、道里区、香坊区、道外区
  - 排序方式：最新优先、最早优先、价格高低
- 📋 **预测列表**：显示哈尔滨各区房产
  - 学府路小区（南岗区）- ¥92万
  - 中央大街周边（道里区）- ¥88万
  - 和兴路小区（香坊区）- ¥76万
  - 南直路住宅（道外区）- ¥68万
  - 哈西万达（南岗区）- ¥95万
  - 群力新区（道里区）- ¥85万
- 📄 **分页控制**：每页6条记录
- 📥 **导出功能**：导出数据
- 👁️ **查看详情**：查看单个预测详情

##### `SettingsView.tsx` - 系统设置页面
**功能**：管理用户账户和偏好设置
**包含内容**：
- 👤 **个人资料标签**：
  - 头像上传
  - 姓名、邮箱、手机号
  - 个人简介
  - 修改密码
- 🔔 **通知设置标签**：
  - 邮件通知开关
  - 推送通知开关
  - 各类通知项（预测更新、市场预警、价格变动、周报）

---

#### 功能组件

##### `LoginRegister.tsx` - 登录注册页面
**功能**：用户认证界面
**设计**：现代简洁风格，优化版
**布局**：5列栅格（左2右3）
**包含内容**：
- **Header**：简洁顶栏（Logo + 标题 + 服务热线）
- **左侧（2/5）**：系统特性介绍
  - 政府认证标签
  - 4个特性卡片（智能预测、AI分析、实时数据、安全可靠）
  - 温馨提示框
  - Sticky定位
- **右侧（3/5）**：认证表单
  - 登录标签页：邮箱、密码
  - 注册标签页：姓名、邮箱、密码
  - 演示提示（琥珀色标签）
- **Footer**：简洁版权信息

**组件尺寸**：
- Header高度：py-3
- Logo尺寸：8x8
- 标题大小：text-base
- 输入框高度：h-10
- Tab高度：h-10
- 卡片padding：p-6

##### `LocationSelector.tsx` - 位置选择器
**功能**：房产信息输入组件
**布局**：两行表单，每行4列

**第一行 - 地址信息**：
1. **省份**（必填 *）：黑龙江省
2. **城市**（必填 *）：哈尔滨市
3. **区/县**（必填 *）：预留字段（显示"待从JSON加载"，disabled）
4. **小区名称**（必填 *）：预留字段（显示"待从JSON加载"，disabled）

**第二行 - 房产信息**：
1. **面积**（必填 *）：数字类型，单位平方米
2. **主要房间是否南北通透**（选填）：单选按钮（是/否）
3. **经度**（选填）：数字类型，支持6位小数
4. **纬度**（选填）：数字类型，支持6位小数

**数据来源**：
- 当前：硬编码的黑龙江省哈尔滨市数据
- 未来：从本地JSON文件加载区县和小区数据

**组件尺寸**：
- 输入框高度：h-9
- 标签文字：text-sm
- 间距：gap-4, space-y-2

##### `PredictionResults.tsx` - 预测结果展示
**功能**：显示机器学习模型的预测结果
**展示内容**：
- ✅ **预测状态**：完成/错误/加载中
- 💰 **预测价格**：总价和单价（元/平方米）
- 📈 **置信度**：百分比显示
- 📊 **市场趋势**：上涨/下降标识
- 📉 **价格区间**：最低价-最高价
- 🎯 **关键影响因素**：
  - 地段评分
  - 交通便利度
  - 学区质量
  - 房龄因素
  - 配套设施
  - 每项显示影响程度（高/中影响）和分数
- 🏘️ **可比房产**：显示3个相似房产及距离

##### `AIReasoningChat.tsx` - AI智能分析对话
**功能**：与AI助手对话，获取详细分析
**特点**：
- 💬 **聊天界面**：用户和AI消息分离显示
- 🤖 **AI头像**：蓝色背景
- 👤 **用户头像**：红色背景
- ⏱️ **时间戳**：每条消息显示时间
- ⌨️ **输入框**：支持Enter发送、Shift+Enter换行
- 🔄 **加载状态**：显示AI正在思考
**AI回复内容**（模拟）：
- 针对哈尔滨市场的价格合理性分析
- 可比房产对比
- 关键因素解读
- 哈尔滨市场趋势建议
- 投资建议

---

### 🎨 UI组件库 (`/components/ui/`)

这个文件夹包含所有可重用的UI组件（基于shadcn/ui）：

#### 表单组件
- `button.tsx` - 按钮
- `input.tsx` - 输入框
- `textarea.tsx` - 文本域
- `label.tsx` - 标签
- `select.tsx` - 下拉选择
- `checkbox.tsx` - 复选框
- `switch.tsx` - 开关
- `radio-group.tsx` - 单选按钮组
- `slider.tsx` - 滑动条

#### 布局组件
- `card.tsx` - 卡片容器
- `separator.tsx` - 分隔线
- `scroll-area.tsx` - 滚动区域
- `resizable.tsx` - 可调整大小面板
- `tabs.tsx` - 标签页

#### 反馈组件
- `alert.tsx` - 警告提示
- `dialog.tsx` - 对话框
- `toast/sonner.tsx` - 消息通知
- `progress.tsx` - 进度条
- `badge.tsx` - 徽章

#### 数据展示
- `table.tsx` - 表格
- `avatar.tsx` - 头像
- `command.tsx` - 命令面板（搜索）

#### 弹出层组件
- `popover.tsx` - 弹出框
- `tooltip.tsx` - 工具提示
- `dropdown-menu.tsx` - 下拉菜单

---

### 🖼️ 特殊组件 (`/components/figma/`)

##### `ImageWithFallback.tsx`
- **作用**：带后备方案的图片组件
- **功能**：如果图片加载失败，显示占位符
- **注意**：这是受保护的系统文件，不要修改

---

### 🎨 样式文件 (`/styles/`)

##### `globals.css`
- **作用**：全局CSS样式
- **包含**：
  - Tailwind CSS 基础样式
  - 自定义颜色变量
  - 全局排版设置
  - 默认元素样式

---

## 🔄 数据流程

### 1. 用户登录流程
```
LoginRegister.tsx → 验证 → Layout.tsx → 显示主界面
```

### 2. 预测流程
```
用户 → LocationSelector.tsx（填写房产信息）
     ├─ 省份：黑龙江省
     ├─ 城市：哈尔滨市
     ├─ 区/县：待从JSON加载
     ├─ 小区名称：待从JSON加载
     ├─ 面积：必填
     ├─ 南北通透：选填
     ├─ 经度：选填
     └─ 纬度：选填
     ↓
     点击"开始预测"
     ↓
     左侧：PredictionResults.tsx（显示预测）
     右侧：AIReasoningChat.tsx（AI分析）
```

### 3. 页面导航流程
```
Layout.tsx 顶部导航
├── 工作台 → DashboardView.tsx（哈尔滨市场数据）
├── 新建预测 → LocationSelector + 分屏显示
├── 历史记录 → HistoryView.tsx（哈尔滨房产记录）
└── 系统设置 → SettingsView.tsx
```

---

## 🎯 当前布局结构

### 页面结构
```
┌─────────────────────────────────────────────────┐
│  红色顶栏：Logo 房地产价格预测系统 | 用户 [退出] │
├─────────────────────────────────────────────────┤
│  导航栏：[工作台] [新建预测] [历史记录] [设置]   │
├─────────────────────────────────────────────────┤
│                                                 │
│  主内容区域（根据导航切换）                      │
│  - 工作台：哈尔滨市场统计 + 热门区域            │
│  - 新建预测：                                   │
│    ┌─────────────────────────────────┐         │
│    │  第一行：省市区小区（黑龙江哈尔滨）│         │
│    │  第二行：面积/通透/经纬度          │         │
│    │  [开始预测] 按钮                │         │
│    └─────────────────────────────────┘         │
│    ┌──────────────┬──────────────┐             │
│    │  预测结果    │  AI智能分析  │  (可调整)   │
│    │  (左侧)      │  (右侧)      │             │
│    └──────────────┴──────────────┘             │
│  - 历史记录：哈尔滨房产记录列表                  │
│  - 设置：个人资料 / 通知设置                    │
│                                                 │
├─────────────────────────────────────────────────┤
│  底部：© 2025 版权所有 | ICP备案               │
└─────────────────────────────────────────────────┘
```

---

## 💡 重要说明

### 数据配置

#### 当前数据源
- **省份**：黑龙江省（硬编码）
- **城市**：哈尔滨市（硬编码）
- **区县**：预留，待从JSON加载
- **小区**：预留，待从JSON加载

#### 哈尔滨房产数据
**主要区域**：
- 南岗区：学府路、哈西万达（均价 ¥92-95万）
- 道里区：中央大街、群力新区（均价 ¥85-88万）
- 香坊区：和兴路（均价 ¥76万）
- 道外区：南直路（均价 ¥68万）

### 需要替换的模拟数据

1. **LocationSelector.tsx**
   - `locations.districts` - 从JSON文件加载哈尔滨各区数据
   - `locations.neighborhoods` - 从JSON文件加载各区小区数据
   - 建议JSON格式：
   ```json
   {
     "districts": {
       "哈尔滨市": ["南岗区", "道里区", "香坊区", "道外区", ...]
     },
     "neighborhoods": {
       "南岗区": ["学府路小区", "哈西万达", ...],
       "道里区": ["中央大街周边", "群力新区", ...]
     }
   }
   ```

2. **PredictionResults.tsx**
   - `predictionData` 对象 - 替换为机器学习模型API返回的数据
   - 需要包含：价格、置信度、影响因素、可比房产

3. **AIReasoningChat.tsx**
   - `responses` 数组 - 替换为真实LLM API调用
   - 需针对哈尔滨市场提供专业分析

4. **DashboardView.tsx & HistoryView.tsx**
   - 统计数据和历史记录 - 替换为后端数据库查询结果
   - 确保所有数据都是哈尔滨市的真实房产

### 建议的后端API端点

```
POST /api/auth/login - 用户登录
POST /api/auth/register - 用户注册

GET  /api/locations/provinces - 获取省份列表
GET  /api/locations/cities/:province - 获取城市列表
GET  /api/locations/districts/:city - 获取区县列表（哈尔滨）
GET  /api/locations/neighborhoods/:district - 获取小区列表

POST /api/predictions - 创建新预测
     请求参数：{
       province, city, district, neighborhood,
       area, isNorthSouth, longitude, latitude
     }
GET  /api/predictions - 获取预测历史
GET  /api/predictions/:id - 获取单个预测详情

POST /api/ai/chat - AI对话接口
GET  /api/dashboard/stats - 获取工作台统计数据（哈尔滨）

PUT  /api/user/profile - 更新用户资料
PUT  /api/user/settings - 更新用户设置
```

---

## 🎨 设计规范

### 颜色系统
- **主色**：红色 `red-600` (中国国企风格)
- **辅助色**：蓝色 `blue-600` (AI分析区域)
- **成功色**：绿色 `green-600`
- **警告色**：黄色/琥珀色 `amber-600`
- **背景色**：灰色系 `gray-50/100/900`

### 组件尺寸标准
- **Header高度**：py-3（紧凑）
- **按钮高度**：h-8 (小) / h-9 (中) / h-10 (大)
- **输入框高度**：h-9（标准）
- **卡片padding**：p-4 (紧凑) / p-5 (标准) / p-6 (宽松)
- **图标尺寸**：w-3 h-3 (小) / w-4 h-4 (中) / w-5 h-5 (大)
- **文字大小**：text-xs / text-sm / text-base / text-lg
- **最大宽度**：max-w-[1400px]（保持内容居中）

### 间距系统
- **组件间距**：gap-4 / space-y-4
- **内边距**：p-4 / p-5 / p-6
- **外边距**：mb-4 / mb-5 / mb-6

---

## 🚀 开发状态

### 已完成功能
- ✅ 完整的UI界面（中文 + 国企风格）
- ✅ 精致的用户认证界面
- ✅ 哈尔滨地区数据配置
- ✅ 八字段表单（省市区小区 + 面积/通透/经纬度）
- ✅ 预测结果展示界面
- ✅ AI对话界面
- ✅ 哈尔滨市场工作台
- ✅ 历史记录管理（哈尔滨房产）
- ✅ 用户设置页面
- ✅ 响应式布局优化
- ✅ 组件尺寸优化（符合标准网页规范）

### 待实现功能
- ⏳ 从JSON文件加载区县和小区数据
- ⏳ 后端API集成
- ⏳ 机器学习预测模型接入
- ⏳ LLM对话模型接入
- ⏳ 真实数据库连接
- ⏳ 用户认证系统
- ⏳ 数据持久化
- ⏳ 生产环境部署

---

## 📝 文件清单

### 核心文件（8个）
1. `App.tsx` - 应用入口
2. `Layout.tsx` - 主布局
3. `LoginRegister.tsx` - 登录注册
4. `LocationSelector.tsx` - 位置选择器
5. `PredictionResults.tsx` - 预测结果
6. `AIReasoningChat.tsx` - AI对话
7. `DashboardView.tsx` - 工作台
8. `HistoryView.tsx` - 历史记录
9. `SettingsView.tsx` - 系统设置

### UI组件（40+个）
- 位于 `/components/ui/` 目录
- 基于 shadcn/ui 组件库
- 包含表单、布局、反馈、数据展示等组件

### 样式文件
- `styles/globals.css` - 全局样式

### 文档文件
- `PROJECT_STRUCTURE.md` - 本文档
- `Attributions.md` - 第三方库归属
- `guidelines/Guidelines.md` - 开发指南

---

**最后更新日期**：2025年11月10日

**当前版本**：v2.0（优化版）
- 简化为单一布局
- 聚焦哈尔滨房地产市场
- 优化组件尺寸和设计
- 现代化登录界面
